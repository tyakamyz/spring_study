# 1장. 스프링 개발 환경 구축
## ch04. MyBatis의 스프링 연동
- MyBatis의 장점
    - 자동으로 Connection close() 가능
    - MyBatis 내부적으로 PreparedStatement 처리
    - #{prop}와 같이 속성을 지정하면 내부적으로 자동 처리
    - 리턴 타입을 지정하는 경우 자동으로 객체 생성 및 ResultSet 처리
    - 기존의 SQL을 그대로 활용 가능
    - 진입장벽이 낮음
-----------------
- MyBatis 라이브러리 추가
    - pom.xml
    ```xml
    <!-- mybatis 라이브러리 추가 -->
    <!-- https://mvnrepository.com/artifact/org.mybatis/mybatis -->
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis</artifactId>
        <version>3.4.6</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring -->
    <dependency>
        <groupId>org.mybatis</groupId>
        <artifactId>mybatis-spring</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    ```
- SQLSessionFactory
    - SQLSession을 통해 Connection을 생성하거나 원하는 SQL을 전달하고, 결과를 리턴 받는 구조로 작성하게 됨
    - root-context.xml
    ```xml
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
		<property name="dataSource" ref="dataSource"></property>
	</bean>
    ```
- Mapper
    - SQLSessionFactory를 이용해서 코드를 작성해도 직접 Connection을 얻어서 JDBC 코딩이 가능하지만 좀 더 편하게 사용하기 위해 Mapper 사용
    - SQL을 어떻게 처리할 것인지 별도의 설정을 분리해 주고, 자동으로 처리되는 방식 이용
    - 즉, SQL과 그에 대한 처리를 지정하는 역할을 함
    - Spring을 이용하는 경우에는 Mapper를 XML과 인터페이스 + 어노테이션의 형태로 작성 가능