# 5장. AOP와 트랜잭션
> ## ch18. AOP라는 패러다임
- AOP란?
    - 관점 지향 프로그래밍
    - 관점이라는 용어는 개발자들에게 관심사(concern)라는 말로 통용됨
    - 즉, 코드를 작성하면서 염두(관심)에 두는 일들
        - 파라미터가 올바르게 들어왔을까?
        - 이 작업을 하는 사용자가 적절한 권한을 가진 사용자인가?
        - 이 작업에서 발생할 수 있는 모든 예외는 어떻게 처리해야 하는가?
        - 등등...
    - 핵심 로직은 아니지만, 코드를 온전하게 만들기 위해서 필요한 고민들.<br>
    <font color="red">AOP는 이러한 핵심 비즈니스 로직이 아닌 관심사들을 별도의 코드로 작성하여<br>
    컴파일 혹은 실행시점에만 결합시킬 수 있도록 괌심사를 분리 하는 것.<br>
    이로 인해 개발자는 핵심 로직에 조금 더 집중할 수 있음</font>
    - 기존의 코드를 수정하지 않고, 원하는 기능들과 결합할 수 있는 패러다임
- AOP 용어들
    - Target
        - 순수한 비즈니스 로직을 의미
        - 어떠한 관심사들과도 관계를 맺지않는 순수한 코어(core)
    - Proxy
        - Target을 전체적으로 감싸고 있는 존재
        - Proxy는 내부적으로 Target을 호출하지만, 필요한 관심사들을 거쳐서 Target을 호출하도록 자동 혹은 수동으로 작성됨
        - Proxy는 대부분 Spring AOP 기능을 이용해서 자동으로 생성되는 auto-proxy 방식을 사용
    - JoinPoint
        - Target이 가진 여러 메서드 (엄밀하게 스프링 AOP에서는 메서드만이 JoinPoint)
    - Pointcut
        - Target에는 여러 메서드(JointPoint)가 존재하기 때문에 어떤 메서드에 관심사를 결합할 것인지를 결정하는 역할
    - Aspect
        - 관심사(concern)는 Aspect와 Advice로 표현할 수 있으며, Aspect는 관심사 자체를 의미하는 추상명사
    - Advice
        - Advice는 Aspect를 구현한 코드
        - 걱정거리를 분리해 놓은 코드를 의미
            |구분|설명|
            |---|---|
            |Before Advice|Target의 JoinPoint를 호출하기 전에 실행되는 코드.<br>코드의 실행 자체에는 관여할 수 없음|
            |After Returning Advice|모든 실행이 정상적으로 이루어진 후에 동작하는 코드|
            |After Throwing Advice|예외가 발생한 뒤에 동작하는 코드|
            |After Advice|정상적으로 실행되거나 예외가 발생했을 때 구분 없이 동작하는 코드|
            |Around Advice|메서드의 실행 자체를 제어할 수 있는 가장 강력한 코드.<br>직접 대상 메서드를 호출하고 결과나 예외를 처리할 수 있음|
----------
- Advice 어노테이션
    - 과거의 스프링에서는 별도의 인터페이스로 구현되고 이를 클래스로 구현하는 방식으로 제작했으나, 스프링 3버전 이후에는 어노테이션만으로도 모든 설정이 가능
    - Target에 어떤 Advice를 적용할 것인지 XML 설정이 가능하지만, 어노테이션을 통해서도 사용이 가능함
    - AOP에서 Target은 Pointcut에 의해서 자신에게는 없는 기능들을 가지게 됨.